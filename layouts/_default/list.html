{{ define "main" }}
  {{ if eq .LinkTitle ("Advertisments") }}
    <h1 data-aos="zoom-out-right">{{ .Title }}</h1>
    {{ partial "ads/clientads.html" . }}
  {{ else }}
    <div class="main-content">
      
      {{ if .Params.image }}
        <img class="food item listpageimage" src="/{{ .Params.image }}">
      {{ end }}
      <div class="headerstyle item">
        <h1 data-aos="zoom-out-right">{{ .Title }}</h1>
        {{ if .Params.slidein }}
          <img class="slideinimg aos-init aos-animate" data-aos="zoom-out-{{ .Params.slidein.direction }}" src="/{{ .Params.slidein.slideinimage }}">
        {{ end }}
      </div>
      <h4 class="menu-summary item">{{ .Content }}</h4>
      
          {{ $category := .LinkTitle }}
          {{ $categoryurl := .RelPermalink }}            
          <div class="menu-items-container">
          {{ range .RegularPages.ByWeight }}
            {{ if ne $category ("Advertisments") }}
                  {{$sizes := slice}}
                  {{range .Params.prices}}
                    {{if not (in $sizes .size)}}
                      {{$sizes = $sizes | append .size}}
                    {{end}}
                  {{end}}

                  {{$flavours := slice}}
                  {{range .Params.prices}}
                    {{if not (in $flavours .flavour)}}
                      {{$flavours = $flavours | append .flavour}}
                    {{end}}
                  {{end}}
                  
                <div class="menu-item-card" 
                      data-item-url="{{ .RelPermalink }}"
                    data-item-expanded="false"
                    onclick="toggleItemExpansion(this, '{{ .RelPermalink }}', event);">
                    <div class="menu-item-row-top">
                      {{ if .Params.images }}
                        {{ $firstImage := index .Params.images 0 }}
                        {{ if $firstImage.image }}
                          <a href="{{ .RelPermalink }}" class="menu-item-image-link">
                            <div class="menu-item-image">
                              <img src="/{{ $firstImage.image }}" alt="{{ .LinkTitle }}" loading="lazy" class="menu-item-img">
                            </div>
                          </a>
                        {{ end }}
                      {{ end }}
                      <div class="menu-item-header-content">
                        <h3 class="menu-item-title">
                          <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
                        </h3>
                        <div class="menu-item-row-middle">
                          <div class="menu-item-description">
                        {{ .Summary }}
                          </div>
                          <div class="menu-item-price">
                            {{$counter := 0}}
                            {{$number := slice}}
                            {{$total := 0}}
                            {{range .Params.prices}}
                              {{$counter = add $counter 1}}
                              {{$number = $number | append .price}}
                              {{$total = add $total .price}}
                            {{end}} 
                            {{$number := sort $number}}
                            {{ if eq (index $number 0) (index $number (sub $counter 1)) }}
                              {{ $price := float (index $number (sub $counter 1)) }}
                              ${{ (printf "%.2f" $price) | replaceRE "\\.00$" "" }}
                            {{else }}
                              {{ $price1 := float (index $number 0) }}
                              {{ $price2 := float (index $number (sub $counter 1)) }}
                              ${{ (printf "%.2f" $price1) | replaceRE "\\.00$" "" }} | ${{ (printf "%.2f" $price2) | replaceRE "\\.00$" "" }}      
                            {{ end }}
                          </div>
                        </div>
                        <div class="menu-item-options">
                        <ul class="sizes">
                          {{ range $index, $currentItem := $sizes }}
                            {{ if not (or (eq $currentItem "-") (eq $currentItem "None")) }}
                              <li>
                                {{ $currentItem }}
                              </li>
                            {{ end }}
                          {{ end }}
                        </ul>
                        <ul class="flavours">
                          {{ range $index, $currentItem := $flavours }}
                            {{ if not (or (eq $currentItem "-") (eq $currentItem "None")) }}
                              <li>
                                {{ $currentItem }}
                              </li>
                            {{ end }}
                          {{ end }}
                        </ul> 
                        </div>
                      </div>
                    </div>
                    <!-- Expanded content area (hidden by default) -->
                    <div class="menu-item-expanded-content" style="display: none;">
                      <div class="menu-item-expanded-loading">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Loading...</div>
                      </div>
                      <div class="menu-item-expanded-data" style="display: none;"></div>
                    </div>
                </div>
                        {{ end }}                       
            {{ end }}
          </div>

    </div>
  {{ end }}
  {{ partial "socialmedia/share-button.html" . }}
{{ end }}
