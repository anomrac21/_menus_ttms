<!DOCTYPE html>
<html lang="{{ site.Language.LanguageCode }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  {{ partial "layout/loader.html" . }}
  {{ partial "features/askofserver.html" . }}
  {{ partial "modals/apple_instructions.html" . }}
	<div data-barba="wrapper">
    <div data-barba="container" data-barba-namespace="{{ .Title }}">
      <header>
        {{ partial "layout/header.html" . }}
      </header>
      {{ partialCached "ttms-dashboard/dashboard.html" . }}
      {{ partial "components/search.html" . }}
      <main id="main">
        {{ block "main" . }}{{ end }}
        
      </main>
      <div class="bottomads">
          {{ partial "ads/frontpageads.html" . }}
      </div>
        {{ partial "client/opening-hours.html" . }}
    </div>
  </div>

  <footer>
    {{ partial "layout/footer.html" . }}
  </footer>
  
  <!-- CRITICAL SCRIPTS - Load first with defer (in order) -->
  <!-- Barba.js must load early as loader.js depends on it -->
  <script src="https://cdn.jsdelivr.net/npm/@barba/core" defer></script>
  
  <!-- Loader script - High priority, loads after Barba -->
  <script src="{{ site.BaseURL}}js/loader.js" defer></script>
  
  <!-- Client Ad Manager - Load before other scripts that depend on it -->
  <script src="{{ site.BaseURL}}js/client-ad-manager.js" defer></script>
  
  <!-- Core app functionality - deferred -->
  <script src="{{ site.BaseURL}}js/app.js" defer></script>
  <script src="{{ site.BaseURL}}js/custom.js" defer></script>
  
  <!-- IMPORTANT DEPENDENCIES - jQuery and core features -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
  
  <!-- Layout Libraries - Isotope.js -->
  <script src="https://cdn.ttmenus.com/plugins/@_ttms_cdn/static/plugins/isotope.pkgd.min.js" defer></script>
  
  <!-- Sortable.js for drag and drop -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js" defer></script>
  
  <!-- <script src="https://cdn.ttmenus.com/js/cart.js" defer></script>
  <script src="https://cdn.ttmenus.com/js/search.js" defer></script> -->
  
  <!-- SECONDARY FEATURES - Load after core functionality -->
  
  <!-- NON-CRITICAL - Async load for performance -->
  <script src="{{ site.BaseURL}}js/analytics-integrations.js" defer></script>
  
  {{ partial "features/whatsapp_ordering_system.html" . }}
  {{ partial "features/notifications.html" . }}

</body>
</html>
