<!DOCTYPE html>
<html lang="{{ site.Language.LanguageCode }}" dir="{{ or site.Language.LanguageDirection `ltr` }}">
<head>
  {{ partial "head.html" . }}
</head>
<body>
  {{ partial "layout/loader.html" . }}
  {{ partial "features/askofserver.html" . }}
  <div data-barba="wrapper">
    <div data-barba="container" data-barba-namespace="{{ .Title }}">
      <header>
        {{ partial "layout/header.html" . }}
      </header>
      {{ partialCached "ttms-dashboard/dashboard.html" . }}
      {{ partial "components/search.html" . }}
      <main id="main">
        {{ block "main" . }}{{ end }}
        
      </main>
      <div class="bottomads">
          {{ partial "ads/frontpageads.html" . }}
      </div>
        {{ partial "client/openinghours.html" . }}
    </div>
  </div>

  <footer>
    {{ partial "modals/order_modal.html" . }}
    {{ partial "layout/footer.html" . }}
  </footer>
  
  <!-- Critical scripts loaded with defer for better performance -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js" defer></script>
  
  <!-- Core functionality - deferred -->
  <script src="{{ site.BaseURL}}js/app.js" defer></script>
  <script src="{{ site.BaseURL}}js/custom.js" defer></script>
  <script src="{{ site.BaseURL}}js/loader.js" defer></script>
  
  <!-- TTMenus core features - deferred -->
  <script src="https://ct.ttmenus.com/js/askforserver.js" defer></script>
  <script src="https://ct.ttmenus.com/js/cart.js" defer></script>
  <script src="https://ct.ttmenus.com/js/search.js" defer></script>
  
  <!-- Non-critical third-party libraries -->
  <!-- ScrollMagic requires jQuery, so must use defer to maintain load order -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/debug.addIndicators.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/jquery.ScrollMagic.min.js" defer></script>
  <!-- AOS and Barba can still load async as they don't depend on load order -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" async></script>
  <script src="https://cdn.jsdelivr.net/npm/@barba/core" async></script>
  
  <!-- Feature scripts - deferred -->
  <script src="{{ site.BaseURL}}js/ads-sticky.js" defer></script>
  <script src="{{ site.BaseURL}}js/analytics-integrations.js" defer></script>
  <script src="{{ site.BaseURL}}js/client-ad-manager.js" defer></script>
  <script src="{{ site.BaseURL}}js/ad-scroll-progress.js" defer></script>
  <script src="{{ site.BaseURL}}js/aos.js" defer></script>
  <script src="{{ site.BaseURL}}js/scrollmagic.js" defer></script>
  <script src="{{ site.BaseURL}}js/openinghours.js" defer></script>
  <script src="{{ site.BaseURL}}js/section-scroll.js" defer></script>
  
  {{ partial "features/whatsapp_ordering_system.html" . }}

</body>
</html>
