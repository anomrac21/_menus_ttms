{{/*
  TikTok Share Button Partial
  Note: TikTok doesn't have a direct web share API for external content.
  This button either links to your TikTok profile or uses the Web Share API.
  
  Usage: {{ partial "socialmedia/tiktok-share.html" (dict "username" "yourhandle" "message" "Check this out!") }}
  
  Parameters:
  - username: Your TikTok username (optional, e.g., "@yourhandle")
  - message: Message to prompt users (optional)
*/}}

{{ $username := .username | default "" }}
{{ $message := .message | default "Share on TikTok" }}

{{ if $username }}
<a href="https://www.tiktok.com/{{ $username }}" 
   class="tiktok-share-btn social-share-btn" 
   target="_blank" 
   rel="noopener noreferrer"
   aria-label="Follow us on TikTok"
   title="Follow us on TikTok">
  <img src="https://ct.ttmenus.com/icons/socialmedia/tk.svg" 
       alt="TikTok" 
       class="social-icon"
       loading="lazy">
  <span class="share-text">TikTok</span>
</a>
{{ else }}
<button onclick="shareToTikTok()" 
        class="tiktok-share-btn social-share-btn"
        aria-label="Share on TikTok"
        title="Share on TikTok">
  <img src="https://ct.ttmenus.com/icons/socialmedia/tk.svg" 
       alt="Share on TikTok" 
       class="social-icon"
       loading="lazy">
  <!-- <span class="share-text">TikTok</span> -->
</button>

<script>
function shareToTikTok() {
  const message = "{{ $message }}";
  const url = window.location.href;
  
  // Try native share API first (works on mobile)
  if (navigator.share) {
    navigator.share({
      title: document.title,
      text: message,
      url: url
    }).then(() => {
      console.log('Shared successfully');
    }).catch((error) => {
      console.log('Error sharing:', error);
      fallbackTikTokShare();
    });
  } else {
    fallbackTikTokShare();
  }
}

function fallbackTikTokShare() {
  // Copy URL to clipboard and show message
  const url = window.location.href;
  
  if (navigator.clipboard) {
    navigator.clipboard.writeText(url).then(() => {
      alert('ðŸ“‹ URL copied to clipboard! Open TikTok app and paste the link in your video description or bio.');
    }).catch(() => {
      alert('Please copy this URL and share it on TikTok: ' + url);
    });
  } else {
    alert('Please copy this URL and share it on TikTok: ' + url);
  }
}
</script>
{{ end }}

<style>
.tiktok-share-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background-color: #000000;
  color: white;
  text-decoration: none;
  border: none;
  border-radius: 8px;
  transition: all 0.3s ease;
  font-weight: 500;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  font-family: inherit;
  position: relative;
  overflow: hidden;
}

.tiktok-share-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 0, 80, 0.3), transparent);
  transition: left 0.5s;
}

.tiktok-share-btn:hover::before {
  left: 100%;
}

.tiktok-share-btn:hover {
  background-color: #1a1a1a;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(255, 0, 80, 0.4);
}

.tiktok-share-btn .social-icon {
  width: 24px;
  height: 24px;
  filter: brightness(0) invert(1);
}

.tiktok-share-btn .share-text {
  font-size: 1rem;
  color: white;
}

@media (max-width: 768px) {
  .tiktok-share-btn {
    padding: 0.5rem 1rem;
  }
  
  .tiktok-share-btn .share-text {
    font-size: 0.9rem;
  }
}
</style>

