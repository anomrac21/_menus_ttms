{{/*
  Instagram Share Button Partial
  Note: Instagram doesn't support direct web sharing like other platforms.
  This button opens Instagram's web interface or prompts to use the native app.
  For best results, use with the Web Share API (see instagram-share-enhanced.html)
  
  Usage: {{ partial "socialmedia/instagram-share.html" (dict "username" "yourhandle" "message" "Check out our menu!") }}
  
  Parameters:
  - username: Your Instagram username (optional)
  - message: Message to prompt users (optional)
*/}}

{{ $username := .username | default "" }}
{{ $message := .message | default "Share on Instagram" }}

{{ if $username }}
<a href="https://www.instagram.com/{{ $username }}/" 
   class="instagram-share-btn social-share-btn" 
   target="_blank" 
   rel="noopener noreferrer"
   aria-label="Follow us on Instagram"
   title="Follow us on Instagram">
  <img src="https://ct.ttmenus.com/icons/socialmedia/ig.svg" 
       alt="Instagram" 
       class="social-icon"
       loading="lazy">
  <!-- <span class="share-text">Instagram</span> -->
</a>
{{ else }}
<button onclick="shareToInstagram()" 
        class="instagram-share-btn social-share-btn"
        aria-label="Share on Instagram"
        title="Share on Instagram">
  <img src="https://ct.ttmenus.com/icons/socialmedia/ig.svg" 
       alt="Share on Instagram" 
       class="social-icon"
       loading="lazy">
  <!-- <span class="share-text">Instagram</span> -->
</button>

<script>
function shareToInstagram() {
  const message = "{{ $message }}";
  const url = window.location.href;
  
  // Try native share API first (works on mobile)
  if (navigator.share) {
    navigator.share({
      title: document.title,
      text: message,
      url: url
    }).then(() => {
      console.log('Shared successfully');
    }).catch((error) => {
      console.log('Error sharing:', error);
      fallbackInstagramShare();
    });
  } else {
    fallbackInstagramShare();
  }
}

function fallbackInstagramShare() {
  // Copy URL to clipboard and show message
  const url = window.location.href;
  
  if (navigator.clipboard) {
    navigator.clipboard.writeText(url).then(() => {
      alert('ðŸ“‹ URL copied to clipboard! Open Instagram app and paste the link in your story or post.');
    }).catch(() => {
      alert('Please copy this URL and share it on Instagram: ' + url);
    });
  } else {
    alert('Please copy this URL and share it on Instagram: ' + url);
  }
}
</script>
{{ end }}

<style>
.instagram-share-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.25rem;
  background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
  color: white;
  text-decoration: none;
  border: none;
  border-radius: 8px;
  transition: all 0.3s ease;
  font-weight: 500;
  box-shadow: 0 2px 8px rgba(188, 24, 136, 0.3);
  cursor: pointer;
  font-family: inherit;
}
.share-text {
        font-size: x-small !important;
}
.instagram-share-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(188, 24, 136, 0.4);
  filter: brightness(1.1);
}

.instagram-share-btn .social-icon {
  width: 24px;
  height: 24px;
  filter: brightness(0) invert(1);
}

.instagram-share-btn .share-text {
  font-size: 1rem;
  color: white;
}

.social-share-horizontal .social-share-buttons .social-share-btn {
        width: 100%;
        justify-content: center;
        display: flex;
        flex-direction: column;
        padding: .4em;
        gap: 0.2rem;
    }
</style>

