<div id="client-openinghours">
  <div class="nav-btns">
    <button class="l-btn" onclick="navigateOpeningHours(-1)" title="Previous location">
      <svg fill="#ffffff" width="64px" height="64px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"/><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="SVGRepo_iconCarrier"><path d="M604.7 759.2l61.8-61.8L481.1 512l185.4-185.4-61.8-61.8L357.5 512z"/></g></svg>
    </button>
    <button class="r-btn" onclick="navigateOpeningHours(1)" title="Next location">
      <svg fill="#ffffff" width="64px" height="64px" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"/><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="SVGRepo_iconCarrier"><path d="M419.3 264.8l-61.8 61.8L542.9 512 357.5 697.4l61.8 61.8L666.5 512z"/></g></svg>
    </button>
  </div>
  <ul class="inner">
    {{ $days := slice "sun" "mon" "tue" "wed" "thu" "fri" "sat" }}
    {{ range $i, $loc := site.Data.locations.locations }}
      {{ $index := printf "loc-%d" $i }}
      <li class="ad-panel opening-hours-location" 
          data-location-index="{{ $i }}"
          data-whatsapp="{{ .whatsapp }}"
          data-address="{{ .address }}"
          {{ if ne $i 0 }}style="display: none;"{{ end }}>
        <div class="openstatus center aos-init aos-animate hide" data-aos="zoom-in" data-aos-anchor="#home">
          <a id="opensign-{{ $index }}" class="locbtn btn open hide">Open</a>
          <a id="closedsign-{{ $index }}" class="locbtn btn close hide">Closed</a>
          <a id="soonopen-{{ $index }}" class="locbtn btn open soon hide">Opens Soon</a>
          <a id="soonclose-{{ $index }}" class="locbtn btn close soon hide">Closes Soon</a>
        </div>

        <div class="location-block">
          <h3>
            <a href="https://www.ttmenus.com/map/?lat={{ index .latlon 0 }}&lng={{ index .latlon 1 }}&zoom=19&client={{ $.Title | urlize }}" class="locbtn btn"  target="_blank">
              {{ .address }}
            </a>
          </h3>
          {{ with .opening_hours }}
          {{ $oh := . }}
          <div class="hours" data-opening-hours>
            <ul class="today-hours">
              <!-- JavaScript can populate today's hours here -->
            </ul>

            <details class="accordion">
              <summary>Show All Hours</summary>
              <ul class="all-hours">
                {{ range $days }}
                  {{ $day := . }}
                  {{ with index $oh $day }}
                    {{ $entries := index $oh $day }}
                    {{ $openList := where $entries "type" "Open" }}
                    {{ $closeList := where $entries "type" "Close" }}
                    {{ $open := index $openList 0 }}
                    {{ $close := index $closeList 0 }}
                    <li data-day="{{ $day }}">
                      <strong>{{ $day | title }}:</strong>
                      {{ if and $open $close }}
                        {{ $openTime := $open.time }}
                        {{ $closeTime := $close.time }}
                        
                        {{ if and $openTime $closeTime }}
                          {{ $openParts := split $openTime ":" }}
                          {{ $closeParts := split $closeTime ":" }}
                          
                          {{ $openHour := int (index $openParts 0) }}
                          {{ $openMin := index $openParts 1 }}
                          {{ $openAMPM := cond (ge $openHour 12) "PM" "AM" }}
                          {{ $open12 := mod $openHour 12 | default 12 }}
                          
                          {{ $closeHour := int (index $closeParts 0) }}
                          {{ $closeMin := index $closeParts 1 }}
                          {{ $closeAMPM := cond (ge $closeHour 12) "PM" "AM" }}
                          {{ $close12 := mod $closeHour 12 | default 12 }}
                          
                          {{ printf "%d:%s%s â€“ %d:%s%s" $open12 $openMin (lower $openAMPM) $close12 $closeMin (lower $closeAMPM) }}
                        {{ else }}
                          Closed
                        {{ end }}
                        
                      {{ else }}
                        Closed
                      {{ end }}
                    </li>
                  {{ else }}
                    <li data-day="{{ $day }}"><strong>{{ $day | title }}:</strong> Closed</li>
                  {{ end }}
                {{ end }}
              </ul>
            </details>
          </div>
        {{ else }}
          <p><em>No hours listed</em></p>
        {{ end }}
      </div>
      <div style="height: 4em;"></div>
      </li>
    {{ end }}
  </ul>      
</div>
<a class="menu-anchor" id="openhours"></a>
